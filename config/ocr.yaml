# PaddleOCR Configuration

ocr:
  # PaddleOCR Settings
  paddle:
    use_gpu: true
    gpu_mem: 2000  # MB
    enable_mkldnn: false  # CPU optimization (disable when using GPU)

    # Detection model (finds text regions)
    det_model: "en_PP-OCRv4_det"
    det_db_thresh: 0.3
    det_db_box_thresh: 0.6

    # Recognition model (reads text)
    rec_model: "en_PP-OCRv4_rec"
    rec_batch_num: 6  # Batch multiple plates together

    # Supported languages (80+ available)
    languages: ['en']  # en, ch, fr, german, korean, japan, etc.

  # Preprocessing
  preprocessing:
    # Upscale small plates for better OCR
    min_plate_height: 48
    target_height: 128  # Higher for better OCR accuracy
    denoise: true   # NL-means denoising — helps with video compression noise
    enhance_contrast: true  # CLAHE — handles uneven lighting and shadows
    sharpen: false  # Unsharp mask — leave off, EnhancedOCR handles sharpening internally
    remove_color: false  # Florida orange logo inpainting — enable if logo causes misreads
    adaptive_threshold: false  # EnhancedOCR applies adaptive threshold as one of its strategies

  # Post-processing
  postprocessing:
    # Character whitelist (restrict to valid plate characters)
    use_whitelist: true
    whitelist: "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"

    # Confidence filtering
    min_confidence: 0.35  # Lowered: EnhancedOCR boosts confidence via majority voting
    min_text_length: 4    # Raised: 3-char reads are almost never valid plates
    max_text_length: 10   # Maximum characters

  # Performance
  performance:
    use_tensorrt: true
    precision: "FP16"
    batch_timeout_ms: 50  # Wait up to 50ms to batch plates
    max_batch_size: 8

  # Fallback to alternative OCR
  fallback:
    enabled: false
    provider: "tesseract"  # tesseract, easyocr
